<?xml version="1.0" encoding="utf-8"?>
<androidx.core.widget.NestedScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_light"
    android:padding="12dp"
    android:fillViewport="true"
    android:scrollbars="vertical"
    tools:context=".ScanFragment">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:paddingBottom="80dp">

        <!-- Scan Header -->
        <com.google.android.material.card.MaterialCardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="12dp"
            app:cardCornerRadius="16dp"
            app:cardElevation="8dp"
            app:strokeWidth="2dp"
            app:strokeColor="@color/primary_color">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Scan Waste"
                    android:textSize="24sp"
                    android:textStyle="bold"
                    android:textColor="@color/primary_color" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Take a photo or select from gallery"
                    android:textSize="16sp"
                    android:textColor="@color/text_secondary"
                    android:layout_marginTop="4dp" />

            </LinearLayout>

        </com.google.android.material.card.MaterialCardView>

        <!-- Image Preview Card -->
        <com.google.android.material.card.MaterialCardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="12dp"
            app:cardCornerRadius="16dp"
            app:cardElevation="8dp">

            <FrameLayout
                android:layout_width="match_parent"
                android:layout_height="300dp"
                android:background="@color/card_background">

                <ImageView
                    android:id="@+id/imagePreview"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:scaleType="centerCrop"
                    android:visibility="gone"
                    android:contentDescription="Selected image" />

                <LinearLayout
                    android:id="@+id/noImageLayout"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical"
                    android:gravity="center"
                    android:visibility="visible">

                    <ImageView
                        android:layout_width="80dp"
                        android:layout_height="80dp"
                        android:src="@drawable/ic_launcher_foreground"
                        android:contentDescription="Camera icon"
                        android:alpha="0.5" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="No image selected"
                        android:textSize="16sp"
                        android:textColor="@color/text_secondary"
                        android:layout_marginTop="16dp"
                        android:alpha="0.7" />

                </LinearLayout>

                <!-- Loading Indicator -->
                <com.google.android.material.progressindicator.CircularProgressIndicator
                    android:id="@+id/progressIndicator"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:visibility="gone"
                    app:indicatorColor="@color/primary_color"
                    app:trackColor="@color/progress_track_color" />

            </FrameLayout>

        </com.google.android.material.card.MaterialCardView>

        <!-- Action Buttons -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_marginBottom="12dp">

            <com.google.android.material.button.MaterialButton
                android:id="@+id/btnPickImage"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_marginEnd="8dp"
                android:text="Gallery"
                android:textSize="14sp"
                style="@style/Widget.Material3.Button.OutlinedButton" />

            <com.google.android.material.button.MaterialButton
                android:id="@+id/btnCapture"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:layout_marginStart="8dp"
                android:text="Camera"
                android:textSize="14sp"
                style="@style/Widget.Material3.Button.OutlinedButton" />

        </LinearLayout>

        <!-- Predict Button -->
        <com.google.android.material.button.MaterialButton
            android:id="@+id/btnPredict"
            android:layout_width="match_parent"
            android:layout_height="56dp"
            android:layout_marginBottom="24dp"
            android:text="Classify Waste"
            android:textSize="16sp"
            android:textStyle="bold"
            android:enabled="false"
            style="@style/Widget.Material3.Button" />

        <!-- Results Card -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/resultCard"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:visibility="gone"
            app:cardCornerRadius="16dp"
            app:cardElevation="8dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <!-- Prediction Result -->
                <TextView
                    android:id="@+id/txtPredicted"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Predicted: Plastic (85.2%)"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    android:textColor="@color/primary_color"
                    android:gravity="center"
                    android:layout_marginBottom="12dp" />

                <!-- Tips -->
                <TextView
                    android:id="@+id/txtTips"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="Tips will appear here..."
                    android:textSize="14sp"
                    android:textColor="@color/text_primary"
                    android:layout_marginBottom="12dp" />

                <!-- Reduce and Recycle Cards -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal">

                    <com.google.android.material.card.MaterialCardView
                        android:id="@+id/cardReduce"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:layout_marginEnd="8dp"
                        app:cardCornerRadius="12dp"
                        app:cardElevation="4dp"
                        app:strokeWidth="2dp"
                        app:strokeColor="@color/cat_plastic">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical"
                            android:padding="16dp">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Reduce"
                                android:textSize="16sp"
                                android:textStyle="bold"
                                android:textColor="@color/cat_plastic"
                                android:layout_marginBottom="8dp" />

                            <TextView
                                android:id="@+id/txtReduce"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:text="Reduce tips..."
                                android:textSize="12sp"
                                android:textColor="@color/text_secondary" />

                        </LinearLayout>

                    </com.google.android.material.card.MaterialCardView>

                    <com.google.android.material.card.MaterialCardView
                        android:id="@+id/cardRecycle"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:layout_marginStart="8dp"
                        app:cardCornerRadius="12dp"
                        app:cardElevation="4dp"
                        app:strokeWidth="2dp"
                        app:strokeColor="@color/cat_plastic">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical"
                            android:padding="16dp">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:text="Recycle"
                                android:textSize="16sp"
                                android:textStyle="bold"
                                android:textColor="@color/cat_plastic"
                                android:layout_marginBottom="8dp" />

                            <TextView
                                android:id="@+id/txtRecycle"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:text="Recycle tips..."
                                android:textSize="12sp"
                                android:textColor="@color/text_secondary" />

                        </LinearLayout>

                    </com.google.android.material.card.MaterialCardView>

                </LinearLayout>

            </LinearLayout>

        </com.google.android.material.card.MaterialCardView>

        <!-- Additional Tips Card -->
        <com.google.android.material.card.MaterialCardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="12dp"
            app:cardCornerRadius="16dp"
            app:cardElevation="6dp"
            app:cardBackgroundColor="@android:color/white">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Tips for Better Classification"
                    android:textSize="18sp"
                    android:textStyle="bold"
                    android:textColor="@color/primary_color"
                    android:layout_marginBottom="12dp" />

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="• Ensure good lighting when taking photos\n• Keep the waste item centered in the frame\n• Avoid shadows and reflections\n• Take photos from multiple angles if needed\n• Clean the lens before capturing"
                    android:textSize="14sp"
                    android:textColor="@color/text_primary"
                    android:lineSpacingExtra="4dp" />

            </LinearLayout>

        </com.google.android.material.card.MaterialCardView>

    </LinearLayout>

</androidx.core.widget.NestedScrollView>
